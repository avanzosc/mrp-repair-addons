<?xml version="1.0"?>
<openerp>
    <data>
        <record id="view_repair_order_form_inh_partner_lot" model="ir.ui.view">
            <field name="name">view.repair.order.form.inh.partner.lot</field>
            <field name="model">mrp.repair</field>
            <field name="inherit_id" ref="mrp_repair.view_repair_order_form"/>
            <field name="arch" type="xml">
                <page string="Notes" position="after">
                    <page string="Repair report" name="repair-report">
                        <group colspan="4">
                            <field name="customer_lot_ids" nolabel="1" 
                                    context="{'default_repair_id': active_id, 'show_customer_product_code':True}">
                                <tree string="Customer lots" name="tree-customer-lots">
                                    <field name="repair_id" invisible="1"/>
                                    <field name="customer_id" invisible="1" />
                                    <field name="product_code" />
                                    <field name="product_tmpl_id" />
                                    <field name="lot_id" />
                                    <field name="quantity" />
                                    <field name="description_breakdown" />
                                    <field name="cause" />
                                    <field name="repair_effectuate" />
                                    <field name="repairable" />
                                </tree>
                                <form string="MRP repair customer lot" name="form-customer-lots">
                                    <sheet>
                                        <group name="head">
                                            <group>
                                                <field name="repair_id" invisible="1"/>
                                                <field name="customer_id" invisible="1"/>
                                                <field name="product_code"
                                                    domain="[('name', '=', customer_id), ('type', '=', 'customer')]"
                                                    context="{'show_customer_product_code':True}" />
                                                <field name="product_tmpl_id" readonly="1" />
                                            </group>
                                            <group>
                                                <field name="lot_id" />
                                                <field name="quantity" />
                                                <field name="repairable" />
                                            </group>
                                            <separator string="Description breakdown" colspan="4" />
                                            <field name="description_breakdown" nolabel="1" colspan="4" />
                                            <separator string="Cause" colspan="4" />
                                            <field name="cause" nolabel="1" colspan="4" />
                                            <separator string="Repair effectuate" colspan="4" />
                                            <field name="repair_effectuate" nolabel="1" colspan="4" />
                                        </group>
                                    </sheet>
                                </form>
                            </field>
                        </group>
                    </page>
                </page>
            </field>
        </record>
    </data>
</openerp>
